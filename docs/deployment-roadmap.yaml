---
# anim-gl Complete Deployment Roadmap
# Single source of truth for migrating to Sanity and launching chrishall.io

project:
  name: anim-gl
  description: Chris Hall portfolio site with WebGL animations
  repository: /Users/chrishall/development/anim-gl
  target_domains:
    primary: chrishall.io
    redirect: chrisryanhall.com

phases:
  - phase: 0
    name: Foundation
    status: complete
    description: Infrastructure already merged into repo
    tasks:
      - name: Environment configuration
        status: complete
        files:
          - .env.example
          - src/utils/env.js
      
      - name: Sanity client setup
        status: complete
        files:
          - src/utils/sanityClient.js
          - src/utils/sanityApi.js
      
      - name: Runtime loaders
        status: complete
        files:
          - src/start/firstload.js
          - src/js/loads.js
          - src/main/index.js
      
      - name: Schema setup
        status: complete
        files:
          - sanity/schemaTypes/page.js
          - sanity/schemaTypes/project.js
          - sanity/schemaTypes/textureGroup.js
          - sanity/schemaTypes/globalOptions.js
        notes:
          - legacyId fields added to schemas
          - textureRefs references configured
          - Studio appId captured in sanity.cli.js

  - phase: 1
    name: Local Environment Setup
    status: in_progress
    tasks:
      - name: Configure environment variables
        steps:
          - action: Copy .env.example to .env.local
            command: cp .env.example .env.local
          
          - action: Edit .env.local
            required_vars:
              VITE_USE_SANITY: "0"
              VITE_SANITY_PROJECT_ID: your_project_id_here
              VITE_SANITY_DATASET: production
              VITE_SANITY_API_VERSION: "2025-01-01"
              VITE_SANITY_TOKEN: optional_read_token
            notes:
              - Keep VITE_USE_SANITY=0 until content is migrated
              - Token only needed for draft/preview access
      
      - name: Install dependencies
        steps:
          - action: Install root dependencies
            command: bun install
            directory: /Users/chrishall/development/anim-gl
          
          - action: Install Sanity dependencies
            command: cd sanity && bun install
            directory: /Users/chrishall/development/anim-gl/sanity
      
      - name: Verify JSON mode works
        steps:
          - action: Start dev server
            command: bun dev
            directory: /Users/chrishall/development/anim-gl
            expected: Server runs on http://localhost:5173
          
          - action: Test pages
            urls:
              - http://localhost:5173/
              - http://localhost:5173/index/
              - http://localhost:5173/about/
            verify: Pages load with legacy JSON data
      
      - name: Verify Sanity Studio works
        steps:
          - action: Start Sanity Studio
            command: cd sanity && bun dev
            directory: /Users/chrishall/development/anim-gl/sanity
            expected: Studio runs on http://localhost:3333
          
          - action: Test write access
            instructions:
              - Create a test textureGroup document
              - Add a dummy asset
              - Save successfully
              - Delete the test document
            verify: Can read and write to Sanity

  - phase: 2
    name: Asset Preparation
    status: pending
    tasks:
      - name: Gather preview media
        description: Collect 4-5 images/videos per project for index page
        projects:
          - id: "001"
            name: Options Institute
            legacy_id: 393
            texture_key: prjs0
            required:
              - 4-5 preview items (860×645 images or 720×540 videos)
              - 1 homepage feature (720×540 video or 860×645 image) for home0
          
          - id: "002"
            name: Naked Juice
            legacy_id: 44
            texture_key: prjs1
            required:
              - 4-5 preview items (860×645 images or 720×540 videos)
              - 1 homepage feature (860×1151 tall image) for home1
          
          - id: "003"
            name: Collective
            legacy_id: 82
            texture_key: prjs2
            required:
              - 4-5 preview items (860×645 images or 720×540 videos)
              - 1 homepage feature (720×540 video or 860×645 image) for home2
          
          - id: "004"
            name: Vuity
            legacy_id: 90
            texture_key: prjs3
            required:
              - 4-5 preview items (860×645 images or 720×540 videos)
        
        notes:
          - Preview dimensions are for index page sliders
          - Can be mix of images and videos
          - Optimize files (images <400KB, videos <5MB)
      
      - name: Gather gallery media
        description: Collect 7+ full-size images/videos per project
        requirements:
          video_dimensions: 1600×1200 or 1600×1080
          image_dimensions: 1600×1200 or similar high-res
          file_sizes:
            images: <500KB each
            videos: <5MB each
          formats:
            images: WebP with JPG fallback
            videos: MP4 (H.264) with poster frames
      
      - name: Gather portrait images
        required:
          - home3: 1 portrait image (860×1290) for homepage about section
          - about0: 1 portrait image (860×1290) for about page hero
        notes:
          - Can use same image for both if appropriate
          - Will appear in about sections across site

  - phase: 3
    name: Sanity Content Migration
    status: pending
    tasks:
      - name: Create texture groups
        description: Upload preview and feature media
        order: 1
        texture_groups:
          homepage_features:
            - key: home0
              type: single_item
              content: 1 video (720×540) or image (860×645)
              usage: Options Institute on homepage
            
            - key: home1
              type: single_item
              content: 1 tall image (860×1151)
              usage: Naked Juice on homepage
            
            - key: home2
              type: single_item
              content: 1 video (720×540) or image (860×645)
              usage: Collective on homepage
            
            - key: home3
              type: single_item
              content: 1 portrait image (860×1290)
              usage: Homepage about section
            
            - key: about0
              type: single_item
              content: 1 portrait image (860×1290)
              usage: About page hero
          
          project_previews:
            - key: prjs0
              type: array
              content: 4-5 items (mix of images 860×645 and videos 720×540)
              usage: Options Institute index preview
            
            - key: prjs1
              type: array
              content: 4-5 items
              usage: Naked Juice index preview
            
            - key: prjs2
              type: array
              content: 4-5 items
              usage: Collective index preview
            
            - key: prjs3
              type: array
              content: 4-5 items
              usage: Vuity index preview
        
        steps:
          - action: Create textureGroup document for each key
            location: Sanity Studio → Content → Create textureGroup
            fields:
              key: Exact name (home0, home1, prjs0, etc.)
              assets: Upload files and set dimensions
          
          - action: Verify all 9 texture groups created
            checklist:
              - home0
              - home1
              - home2
              - home3
              - about0
              - prjs0
              - prjs1
              - prjs2
              - prjs3
      
      - name: Create globalOptions document
        description: Site-wide navigation and loader HTML
        order: 2
        steps:
          - action: Create ONE globalOptions document
            location: Sanity Studio → Content → Create globalOptions
          
          - action: Paste navigation HTML
            source: content/options.json → nav field
            destination: globalOptions → navHtml field
          
          - action: Paste loader HTML
            source: content/options.json → loader field
            destination: globalOptions → loaderHtml field
          
          - action: Reference texture groups
            field: textureRefs
            select_all:
              - home0
              - home1
              - home2
              - home3
              - about0
              - prjs0
              - prjs1
              - prjs2
              - prjs3
      
      - name: Migrate page documents
        description: Create 4 page documents with HTML content
        order: 3
        pages:
          - title: Home
            legacy_id: 2
            slug: "/"
            template: home
            source_html: content/pages/2.json → csskfields.main
            destination: page → mainHtml
            texture_refs:
              - home0
              - home1
              - home2
              - home3
              - about0
            notes:
              - Update project links to use your slugs
              - Replace placeholder media paths (will be ignored by runtime)
              - Update copy to your content
          
          - title: Index
            legacy_id: 55
            slug: index
            template: projects
            source_html: content/pages/55.json → csskfields.main
            destination: page → mainHtml
            texture_refs:
              - prjs0
              - prjs1
              - prjs2
              - prjs3
            notes:
              - Update project descriptions
              - Adjust project count in header
              - Remove archive section if not using initially
          
          - title: About
            legacy_id: 240
            slug: about
            template: about
            source_html: content/pages/240.json → csskfields.main
            destination: page → mainHtml
            texture_refs:
              - about0
            notes:
              - Write your biography
              - Update contact information
              - Update social media links
          
          - title: Playground
            legacy_id: 308
            slug: playground
            template: playground
            source_html: content/pages/308.json → csskfields.main (if exists)
            destination: page → mainHtml
            texture_refs: []
            notes:
              - Can be added post-launch
              - Experimental work showcase area
      
      - name: Create project documents
        description: Launch with 4 projects initially
        order: 4
        projects:
          - title: The Options Institute
            legacy_id: 393
            slug: options-institute
            project_index: 1
            template: project
            texture_refs:
              - home0
              - prjs0
            steps:
              - Write project description (problem → approach → outcome)
              - Upload 7+ gallery images/videos to Sanity
              - Get Sanity CDN URLs for gallery media
              - Build mainHtml with gallery section
              - Test that all media loads
          
          - title: Naked Juice
            legacy_id: 44
            slug: naked-juice
            project_index: 2
            template: project
            texture_refs:
              - home1
              - prjs1
            steps:
              - Same as above
          
          - title: Collective
            legacy_id: 82
            slug: collective
            project_index: 3
            template: project
            texture_refs:
              - home2
              - prjs2
            steps:
              - Same as above
          
          - title: Vuity
            legacy_id: 90
            slug: vuity
            project_index: 4
            template: project
            texture_refs:
              - prjs3
            steps:
              - Same as above
        
        notes:
          - Each project needs unique, original copy
          - Gallery media goes in HTML with real Sanity URLs
          - Preview media is in texture groups (referenced, not in HTML)
      
      - name: Validate Sanity mode
        description: Test complete Sanity integration locally
        order: 5
        steps:
          - action: Enable Sanity mode
            file: .env.local
            change: VITE_USE_SANITY=0 → VITE_USE_SANITY=1
          
          - action: Restart dev server
            command: bun dev
          
          - action: Test all pages
            test_urls:
              - http://localhost:5173/ (home)
              - http://localhost:5173/index/ (project index)
              - http://localhost:5173/about/ (about page)
              - http://localhost:5173/project/options-institute/
              - http://localhost:5173/project/naked-juice/
              - http://localhost:5173/project/collective/
              - http://localhost:5173/project/vuity/
          
          - action: Verify functionality
            checks:
              - All textures load from Sanity
              - No 404 errors in console
              - Animations trigger correctly
              - Navigation works between pages
              - Project galleries display properly
              - Mobile responsive behavior works
          
          - action: Check browser console
            verify:
              - No missing texture errors
              - No CORS errors
              - No 404s on media files
              - WebGL initializes correctly

  - phase: 4
    name: Content Refinement
    status: pending
    tasks:
      - name: Polish project content
        requirements:
          - Original project descriptions (not template copy)
          - Clear problem/approach/outcome structure
          - Professional tone matching your brand
          - Proofread for grammar and clarity
      
      - name: Optimize media assets
        targets:
          preview_images: <400KB each
          preview_videos: <5MB each
          gallery_images: <500KB each
          gallery_videos: <5MB each
        formats:
          images: WebP primary, JPG fallback
          videos: MP4 (H.264), include poster frames
        tools:
          - Squoosh.app for image compression
          - HandBrake for video compression
          - ImageOptim for batch optimization
      
      - name: Update about page
        content:
          - Professional biography
          - Current contact details
          - Updated resume link
          - Current location (Los Angeles)
          - Active social media links
      
      - name: Configure additional projects
        description: Add remaining projects after launch
        projects_to_add:
          - id: "005"
            legacy_id: 112
            name: Avail
            texture_key: prjs4
          
          - id: "006"
            legacy_id: 123
            name: BP
            texture_key: prjs5
          
          - id: "007"
            legacy_id: 102
            name: SteelSeries
            texture_key: prjs6
          
          - id: "008"
            legacy_id: 193
            name: T-Mobile
            texture_key: prjs7
        
        notes:
          - Add these incrementally post-launch
          - Each needs full asset preparation
          - Update index page project count accordingly

  - phase: 5
    name: Production Build & Testing
    status: pending
    tasks:
      - name: Production build
        steps:
          - action: Create production build
            command: bun run build
            directory: /Users/chrishall/development/anim-gl
            verify: Build completes without errors
          
          - action: Preview production build
            command: bun run preview
            verify: Site works correctly in production mode
          
          - action: Test all routes in preview
            routes:
              - /
              - /index/
              - /about/
              - /project/options-institute/
              - /project/naked-juice/
              - /project/collective/
              - /project/vuity/
      
      - name: Performance testing
        checks:
          - Lighthouse score >90 for performance
          - First Contentful Paint <1.5s
          - Time to Interactive <3s
          - Largest Contentful Paint <2.5s
          - Cumulative Layout Shift <0.1
        
        optimizations_if_needed:
          - Lazy load below-fold images
          - Defer non-critical JavaScript
          - Optimize texture group file sizes
          - Enable compression in Vite config
      
      - name: Cross-browser testing
        browsers:
          - Chrome (latest)
          - Firefox (latest)
          - Safari (latest)
          - Edge (latest)
        
        mobile_devices:
          - iOS Safari
          - Chrome Android
        
        verify:
          - WebGL renders correctly
          - Animations are smooth
          - Touch interactions work
          - No console errors
      
      - name: Accessibility audit
        tools:
          - axe DevTools
          - WAVE browser extension
        
        requirements:
          - All images have alt text
          - Proper heading hierarchy
          - Keyboard navigation works
          - Color contrast passes WCAG AA
          - ARIA labels on interactive elements

  - phase: 6
    name: Vercel Deployment
    status: pending
    tasks:
      - name: Connect repository to Vercel
        steps:
          - action: Log in to Vercel
            url: https://vercel.com
          
          - action: Import project
            source: Git repository or local directory
          
          - action: Configure build settings
            settings:
              framework: Vite
              build_command: bun run build
              output_directory: dist
              install_command: bun install
      
      - name: Set environment variables in Vercel
        location: Project Settings → Environment Variables
        required_vars:
          VITE_USE_SANITY:
            value: "1"
            scope: Production, Preview
          
          VITE_SANITY_PROJECT_ID:
            value: your_sanity_project_id
            scope: Production, Preview
          
          VITE_SANITY_DATASET:
            value: production
            scope: Production, Preview
          
          VITE_SANITY_API_VERSION:
            value: "2025-01-01"
            scope: Production, Preview
          
          VITE_SANITY_TOKEN:
            value: your_read_token (optional)
            scope: Production, Preview
        
        notes:
          - Token only needed if using draft/preview content
          - Use separate dataset for staging if desired
      
      - name: Deploy to preview
        steps:
          - action: Deploy preview
            command: vercel
            verify: Preview URL works correctly
          
          - action: Test preview deployment
            checks:
              - All pages load
              - Sanity content appears
              - Media loads from Sanity CDN
              - No console errors
              - Performance is acceptable
      
      - name: Deploy to production
        steps:
          - action: Deploy production
            command: vercel --prod
          
          - action: Verify production URL
            checks:
              - Site loads correctly
              - All routes work
              - Media loads properly
              - No errors in browser console
          
          - action: Note production URL
            example: https://anim-gl-abc123.vercel.app
            save_for: Domain configuration

  - phase: 7
    name: Domain Migration
    status: pending
    tasks:
      - name: Snapshot current DNS
        description: Document current DNS settings before changes
        providers:
          dreamhost:
            domain: chrishall.io
            current_settings: Document A, CNAME, MX records
          
          godaddy:
            domain: chrisryanhall.com
            current_settings: Document A, CNAME, MX records
        
        critical:
          - Screenshot all DNS records
          - Note TTL values
          - Document MX records for Google Workspace
          - Save nameserver information
      
      - name: Configure primary domain (chrishall.io)
        steps:
          - action: Add domain in Vercel
            location: Project Settings → Domains
            domain: chrishall.io
          
          - action: Get Vercel DNS records
            records_to_add:
              - type: A
                name: "@"
                value: 76.76.21.21
              
              - type: CNAME
                name: www
                value: cname.vercel-dns.com
          
          - action: Update DNS at DreamHost
            location: Panel → Domains → DNS
            changes:
              - Update A record for @ to point to Vercel
              - Update CNAME for www to point to Vercel
              - Keep MX records unchanged (Google Workspace)
          
          - action: Wait for propagation
            duration: 5 minutes to 48 hours
            check: dig chrishall.io
          
          - action: Verify SSL certificate
            url: https://chrishall.io
            verify: Valid SSL certificate from Let's Encrypt
      
      - name: Configure redirect domain (chrisryanhall.com)
        steps:
          - action: Add domain in Vercel
            domain: chrisryanhall.com
          
          - action: Configure 301 redirect
            redirect: chrisryanhall.com → chrishall.io
            type: Permanent (301)
          
          - action: Update DNS at GoDaddy
            changes:
              - Point A record to Vercel
              - Update CNAME for www
              - Keep MX records unchanged
          
          - action: Test redirect
            test_urls:
              - http://chrisryanhall.com → https://chrishall.io
              - https://chrisryanhall.com → https://chrishall.io
              - http://www.chrisryanhall.com → https://chrishall.io
      
      - name: Verify email still works
        critical: Do not break Google Workspace email
        checks:
          - Send test email to chris@chrishall.io
          - Verify it arrives correctly
          - Send email from chris@chrishall.io
          - Verify it sends correctly
        
        if_broken:
          - Check MX records are unchanged
          - Verify TXT records for SPF/DKIM
          - Contact Google Workspace support
      
      - name: Test complete deployment
        tests:
          domain_access:
            - https://chrishall.io loads correctly
            - https://www.chrishall.io loads correctly
            - http://chrishall.io redirects to https
          
          redirect:
            - chrisryanhall.com → chrishall.io (all variants)
          
          functionality:
            - All pages load
            - Navigation works
            - Projects display correctly
            - Textures load from Sanity
            - Animations work smoothly
          
          performance:
            - Initial load <3s
            - Page transitions smooth
            - No console errors
            - Mobile performance acceptable

  - phase: 8
    name: Post-Launch
    status: pending
    tasks:
      - name: Update online presence
        profiles_to_update:
          - LinkedIn (chrisryanhall)
          - Instagram (@getcolor_)
          - Dribbble
          - Behance
          - Read.cv
        
        changes:
          - Update portfolio URL to chrishall.io
          - Update bio if needed
          - Add link to new site
      
      - name: Search engine optimization
        steps:
          - action: Create sitemap.xml
            tool: Can generate via Vite plugin or manually
            location: /public/sitemap.xml
          
          - action: Create robots.txt
            location: /public/robots.txt
            content: |
              User-agent: *
              Allow: /
              Sitemap: https://chrishall.io/sitemap.xml
          
          - action: Submit to Google Search Console
            url: https://search.google.com/search-console
            submit: sitemap.xml
          
          - action: Monitor indexing
            check: Site pages appear in Google search results
      
      - name: Analytics setup (optional)
        options:
          - Vercel Analytics (built-in)
          - Google Analytics 4
          - Plausible Analytics (privacy-focused)
        
        metrics_to_track:
          - Page views
          - Project page visits
          - Geographic distribution
          - Device types
          - Performance metrics
      
      - name: Content maintenance plan
        schedule:
          weekly:
            - Check for broken links
            - Review analytics if enabled
          
          monthly:
            - Add new projects as completed
            - Update about page if needed
            - Refresh portfolio copy
          
          quarterly:
            - Review and optimize media files
            - Update dependencies
            - Performance audit
        
        sanity_benefits:
          - Edit content without redeploying
          - Preview changes before publishing
          - Schedule content updates
          - Collaborative editing if needed
      
      - name: Plan future additions
        features:
          - Playground page with experimental work
          - Blog section for case studies
          - Additional projects (prjs4-7)
          - Enhanced project filtering/sorting
          - Dark mode toggle
        
        projects_to_add:
          - Avail (legacy 112)
          - BP (legacy 123)
          - SteelSeries (legacy 102)
          - T-Mobile (legacy 193)
          - Archive projects as needed

reference:
  documentation:
    texture_mapping: docs/texture-keys-reference.md
    sanity_schemas: sanity/schemaTypes/
    runtime_loaders: src/start/firstload.js, src/js/loads.js
    api_utilities: src/utils/sanityApi.js
  
  legacy_ids:
    pages:
      home: 2
      index: 55
      about: 240
      error: 1
      playground: 308
    
    projects:
      options_institute: 393
      naked_juice: 44
      collective: 82
      vuity: 90
      avail: 112
      bp: 123
      steelseries: 102
      tmobile: 193
  
  texture_keys:
    homepage: [home0, home1, home2, home3]
    about: [about0]
    projects: [prjs0, prjs1, prjs2, prjs3, prjs4, prjs5, prjs6, prjs7]
  
  dimensions:
    preview_images: 860×645
    preview_videos: 720×540
    portrait_images: 860×1290
    gallery_videos: 1600×1200 or 1600×1080
    gallery_images: 1600×1200
  
  urls:
    dev_site: http://localhost:5173
    sanity_studio: http://localhost:3333
    production: https://chrishall.io
    redirect: https://chrisryanhall.com

notes:
  - Update this file as tasks are completed
  - Mark status as: pending, in_progress, complete, blocked
  - Keep legacy IDs consistent across all migrations
  - Test thoroughly before each phase completion
  - Back up content before major changes
  - Document any deviations from this plan
